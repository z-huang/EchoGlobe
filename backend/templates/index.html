{% extends 'layout.html' %}
{% load static %}

{% block extra_css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">
{% endblock %}

{% block title %}EchoGlobe{% endblock %}

{% block content %}


<div class="main-container">
    <!-- History Section -->
    <div class="history-panel">
        <h3>History</h3>
        <ul class="history-list">
            {% for conversation in conversations %}
                <li>
                    <a href="/converation/{{ conversation.slug }}">{{ conversation.title }}</a>
                </li>
            {% empty %}
                <li>No conversations yet.</li>
            {% endfor %}
        </ul>
    </div>

    <!-- Chat Section -->
    <div class="chat-panel">
        <div class="prompt-container">
            <h1 data-i18n="transcript">Transcript</h1>
            <div class="action-buttons">
                <button class="action-btn record-btn" id="startBtn">
                    <span class="btn-icon">‚óè</span>
                    <span data-i18n="record">Record</span>
                </button>
                <button class="action-btn upload-btn">
                    <span class="btn-icon">‚Üë</span>
                    <span data-i18n="upload">Upload</span>
                </button>
                <button class="action-btn chat-btn" id="chatBtn">
                    <span class="btn-icon">üí¨</span>
                    <span data-i18n="chat">Chat</span>
                </button>
                <div class="dropdown">
                    <button class="action-btn language-btn">
                        <span class="btn-icon">üåê</span>
                        ‰∏≠Êñá
                    </button>
                    <div class="dropdown-content">
                        <a href="#" data-lang="cmn-Hant-TW" class="active">‰∏≠Êñá</a>
                        <a href="#" data-lang="en-US">English</a>
                        <a href="#" data-lang="ja-JP">Êó•Êú¨Ë™û</a>
                        <a href="#" data-lang="de-DE">Deutsch</a>
                    </div>
                </div>
                <button class="action-btn new-chat-btn" id="newChatBtn">
                    <span class="btn-icon">‚ûï</span>
                    <span data-i18n="new_chat">New Session</span>
                </button>
            </div>
        </div>

        <div id="transcriptArea" class="transcript-area" style="display: none;">
            <!-- Dynamic transcript content -->
        </div>

        <div id="chatPopup" class="chat-popup">
            <div class="chat-popup-header">
                <h3 data-i18n="chat_assistant">Chat Assistant</h3>
                <button class="clear-history-btn" id="clearHistoryBtn" style="margin-right: 10px;">üóë</button>
                <button class="close-btn" id="closeChatBtn">√ó</button>
            </div>
            <div class="chat-popup-messages" id="chatMessages"></div>
            <div class="chat-popup-input">
                <input type="text" placeholder="Type your message..." data-i18n-placeholder="chat_placeholder" id="chatInput">
                <button id="sendChatBtn" style="font-size: 20px">‚û§</button>
            </div>
        </div>
    </div>

    <!-- Terminology Section -->
    <div class="terminology-panel">
        <h3>Terminology</h3>
        <!-- Terminology content here -->
    </div>
</div>
{% endblock %}
{% block extra_js %}
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="{% static 'js/chatbox.js' %}"></script>
{% endblock %}